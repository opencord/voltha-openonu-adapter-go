{
  "comments": [
    {
      "key": {
        "uuid": "aba1a557_19e47ee8",
        "filename": "internal/pkg/onuadaptercore/onu_metrics_manager.go",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 1000666
      },
      "writtenOn": "2021-01-29T08:06:49Z",
      "side": 1,
      "message": "Now with latest changes the question arises: If now metricsEnabled is not anymore used within OpenOnuAc, why should it be a member there. The only reason could be to still store it as a \u0027global\u0027 variable, valid for all ONU\u0027s. But I think it could be as well stored without to much overhead as ONU specific variable, which would mean it could get a member e.g. of this metricsManager. This would have the advantage that it could easily be used that way even if the decision should be at a certain time to provide some configuration that allows the enable control per ONU (which I would anyway favour, perhaps still with some management way to switch that property for all ONU\u0027s at once).",
      "revId": "864ad307ccf8c62699dc6d93b1620147c962030c",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1b6b312_e77a7462",
        "filename": "internal/pkg/onuadaptercore/onu_metrics_manager.go",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-01-29T18:43:38Z",
      "side": 1,
      "message": "This is only the initial configuration when the device PM config is initialized for the first time. We never hit this path again.\n\nAlthough I initially expected that the \"metrics_enabled\" global config to be available from proto later, I am not sure if it is necessary.\nthe \"metricsEnabled\" flag is exposed via helm chart, so the initial config is controlled via that. Then if operator needs, they can automate\nPM configuration per device per group basis.\n\nFrankly, afaik, the PM configurations are not changed quite often. You will set a global config once on bring up of ONU device the first time by voltha stack,\nand then per device PM config as once they are detected by NEM layer.",
      "parentUuid": "aba1a557_19e47ee8",
      "revId": "864ad307ccf8c62699dc6d93b1620147c962030c",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9907eb3d_acb8e8b3",
        "filename": "internal/pkg/onuadaptercore/onu_metrics_manager.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1000666
      },
      "writtenOn": "2021-01-29T08:06:49Z",
      "side": 1,
      "message": "And a second comment on enable control (just used this line to have different comments here): The code already shows a possible question: why is some extra enable-variable used at all. In theory the enable state could be configured by an extra groupEnable PM configuration (disabled per default). The advantage of the extra metricsEnabled variable would then still perhaps be given, if it would allow for ONU specific setting. But anyway the control of the metricsEnabled variable form adapter config (via helm chart) does not seem necessary to me anymore (except for current testing - as long as the voltctl control for that is still missing)",
      "revId": "864ad307ccf8c62699dc6d93b1620147c962030c",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "926261e6_f6f938fa",
        "filename": "internal/pkg/onuadaptercore/onu_metrics_manager.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2021-01-29T10:28:14Z",
      "side": 1,
      "message": "TT requires onu-adapter to set initial configuration for PM collection as disabled for all ONUs. On the other hand I guess DT requires it enabled. The initial PM configuration when the device is discovered(Adopt_device) can be different from deployment to deployment. The configuration is for arranging this initial value.",
      "parentUuid": "9907eb3d_acb8e8b3",
      "revId": "864ad307ccf8c62699dc6d93b1620147c962030c",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "279806cd_58bc78ff",
        "filename": "internal/pkg/onuadaptercore/onu_metrics_manager.go",
        "patchSetId": 4
      },
      "lineNbr": 139,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-01-29T18:43:38Z",
      "side": 1,
      "message": "Yes this is for setting only the initial value. Once the device is provisioned, the operator can automate setting the required per group PM config (enable/disable group, set group frequency)",
      "parentUuid": "926261e6_f6f938fa",
      "revId": "864ad307ccf8c62699dc6d93b1620147c962030c",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    }
  ]
}