{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2b357e0a_329e4ff9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2022-09-07T13:45:24Z",
      "side": 1,
      "message": "@Amit, @Mahir, @Joey:\nWe need to address the issue of semantic versioning once again. If we stick to https://semver.org/#semantic-versioning-specification-semver, we would have to increment at least the minor version of the ONU adapter for the current patch - i.e. from 2.3.1 to 2.4.0. However, with the ONF, the minor version has so far mostly been incremented only after a release and the patch version has been used for potential backporting. If we now use the incrementing scheme of semantic versioning thus\n\n    MAJOR version when you make incompatible API changes\n    MINOR version when you add functionality in a backwards compatible manner\n    PATCH version when you make backwards compatible bug fixes\n\nwe would have the problem of how to version any backporting actions after a voltha release.  \nSo we have to come up with a concept that satisfies both requirements.",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "070eee32_f9fd123b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2022-09-08T11:12:07Z",
      "side": 1,
      "message": "@Girish, @Mahir:\nThe idea behind making the counters persistent was to be able to find a possibly faulty ONU in case of an adapter restart, which could have caused the restart. However, the storage of the data in the etcd is not so fine-granular that one would catch every error situation with it. Another approach could be to store the counters transiently and to let the Metrics Manager output the counters periodically via kafka events together with the other performance counters in a second step, besides the output possibility via the new voltctl command intoduced with this patch at adapter side.\n\nWhat is your opinion on this?",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4dfb4a4d_dc5c2de6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000097
      },
      "writtenOn": "2022-09-08T15:01:00Z",
      "side": 1,
      "message": "I would also think like the others that we try and avoid storing these counters in the persistent storage. Maybe having it in the memory is good for now. We were thinking of using Prometheus (we have an item in the roadmap wishlist but have not been able to start on it) so that the counters can be taken out of voltha.",
      "parentUuid": "070eee32_f9fd123b",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8ee28441_783402ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-09-12T16:12:57Z",
      "side": 1,
      "message": "Until publishing the counters to Kafka, I\u0027m in favor to use them in memory.",
      "parentUuid": "4dfb4a4d_dc5c2de6",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "594dfa75_a1d43c0c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2022-09-13T07:41:09Z",
      "side": 1,
      "message": "Correct, therefore the counters were moved from the persistent storage in OnuDeviceEntry::SOnuPersistentData to the transient storage of the OmciCC object. Or did I misunderstand your statement?",
      "parentUuid": "8ee28441_783402ee",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4f58b41_52585823",
        "filename": "internal/pkg/mib/onu_device_entry.go",
        "patchSetId": 1
      },
      "lineNbr": 175,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-09-07T20:06:01Z",
      "side": 1,
      "message": "Do we really need to persist this data? Is it important to be restored in adapter reconciliation? It may be better to keep them in memory and loose in an adapter restart.",
      "range": {
        "startLine": 172,
        "startChar": 0,
        "endLine": 175,
        "endChar": 78
      },
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e8be291_129cf6e8",
        "filename": "internal/pkg/mib/onu_device_entry.go",
        "patchSetId": 1
      },
      "lineNbr": 175,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2022-09-13T07:41:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f4f58b41_52585823",
      "range": {
        "startLine": 172,
        "startChar": 0,
        "endLine": 175,
        "endChar": 78
      },
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9d15921_0cffd441",
        "filename": "internal/pkg/mib/onu_device_entry.go",
        "patchSetId": 1
      },
      "lineNbr": 1081,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-09-07T19:02:19Z",
      "side": 1,
      "message": "Are we really persisting the counters on etcd? How often ? Or they reset on restart?\nThere are pros and cons to each approach.",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f75bdeb9_3f76faae",
        "filename": "internal/pkg/mib/onu_device_entry.go",
        "patchSetId": 1
      },
      "lineNbr": 1081,
      "author": {
        "id": 1000671
      },
      "writtenOn": "2022-09-13T07:41:09Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e9d15921_0cffd441",
      "revId": "3fea296b1597777bfda81d0ebf481d8de1ec8bcd",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    }
  ]
}